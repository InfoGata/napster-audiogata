class T extends Error{response;request;options;constructor(t,s,r){const n=t.status||t.status===0?t.status:"",o=t.statusText??"",a=`${n} ${o}`.trim(),i=a?`status code ${a}`:"an unknown error";super(`Request failed with ${i}: ${s.method} ${s.url}`),this.name="HTTPError",this.response=t,this.request=s,this.options=r}}class U extends Error{name="NonError";value;constructor(t){let s="Non-error value was thrown";try{typeof t=="string"?s=t:t&&typeof t=="object"&&"message"in t&&typeof t.message=="string"&&(s=t.message)}catch{}super(s),this.value=t}}class R extends Error{name="ForceRetryError";customDelay;code;customRequest;constructor(t){const s=t?.cause?t.cause instanceof Error?t.cause:new U(t.cause):void 0;super(t?.code?`Forced retry: ${t.code}`:"Forced retry",s?{cause:s}:void 0),this.customDelay=t?.delay,this.code=t?.code,this.customRequest=t?.request}}const x=(()=>{let e=!1,t=!1;const s=typeof globalThis.ReadableStream=="function",r=typeof globalThis.Request=="function";if(s&&r)try{t=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type")}catch(n){if(n instanceof Error&&n.message==="unsupported BodyInit type")return!1;throw n}return e&&!t})(),G=typeof globalThis.AbortController=="function",N=typeof globalThis.AbortSignal=="function"&&typeof globalThis.AbortSignal.any=="function",W=typeof globalThis.ReadableStream=="function",V=typeof globalThis.FormData=="function",q=["get","post","put","patch","head","delete"],Y={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*",bytes:"*/*"},k=2147483647,X=new TextEncoder().encode("------WebKitFormBoundaryaxpyiPgbbPti10Rw").length,O=Symbol("stop");class C{options;constructor(t){this.options=t}}const Q=e=>new C(e),Z={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,onUploadProgress:!0,fetch:!0,context:!0},tt={next:!0},et={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,duplex:!0},st=e=>{if(!e)return 0;if(e instanceof FormData){let t=0;for(const[s,r]of e)t+=X,t+=new TextEncoder().encode(`Content-Disposition: form-data; name="${s}"`).length,t+=typeof r=="string"?new TextEncoder().encode(r).length:r.size;return t}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength;if(typeof e=="string")return new TextEncoder().encode(e).length;if(e instanceof URLSearchParams)return new TextEncoder().encode(e.toString()).length;if("byteLength"in e)return e.byteLength;if(typeof e=="object"&&e!==null)try{const t=JSON.stringify(e);return new TextEncoder().encode(t).length}catch{return 0}return 0},v=(e,t,s)=>{let r,n=0;return e.pipeThrough(new TransformStream({transform(o,a){if(a.enqueue(o),r){n+=r.byteLength;let i=t===0?0:n/t;i>=1&&(i=1-Number.EPSILON),s?.({percent:i,totalBytes:Math.max(t,n),transferredBytes:n},r)}r=o},flush(){r&&(n+=r.byteLength,s?.({percent:1,totalBytes:Math.max(t,n),transferredBytes:n},r))}}))},rt=(e,t)=>{if(!e.body)return e;if(e.status===204)return new Response(null,{status:e.status,statusText:e.statusText,headers:e.headers});const s=Math.max(0,Number(e.headers.get("content-length"))||0);return new Response(v(e.body,s,t),{status:e.status,statusText:e.statusText,headers:e.headers})},nt=(e,t,s)=>{if(!e.body)return e;const r=st(s??e.body);return new Request(e,{duplex:"half",body:v(e.body,r,t)})},m=e=>e!==null&&typeof e=="object",b=(...e)=>{for(const t of e)if((!m(t)||Array.isArray(t))&&t!==void 0)throw new TypeError("The `options` argument must be an object");return A({},...e)},L=(e={},t={})=>{const s=new globalThis.Headers(e),r=t instanceof globalThis.Headers,n=new globalThis.Headers(t);for(const[o,a]of n.entries())r&&a==="undefined"||a===void 0?s.delete(o):s.set(o,a);return s};function w(e,t,s){return Object.hasOwn(t,s)&&t[s]===void 0?[]:A(e[s]??[],t[s]??[])}const _=(e={},t={})=>({beforeRequest:w(e,t,"beforeRequest"),beforeRetry:w(e,t,"beforeRetry"),afterResponse:w(e,t,"afterResponse"),beforeError:w(e,t,"beforeError")}),at=(e,t)=>{const s=new URLSearchParams;for(const r of[e,t])if(r!==void 0)if(r instanceof URLSearchParams)for(const[n,o]of r.entries())s.append(n,o);else if(Array.isArray(r))for(const n of r){if(!Array.isArray(n)||n.length!==2)throw new TypeError("Array search parameters must be provided in [[key, value], ...] format");s.append(String(n[0]),String(n[1]))}else if(m(r))for(const[n,o]of Object.entries(r))o!==void 0&&s.append(n,String(o));else{const n=new URLSearchParams(r);for(const[o,a]of n.entries())s.append(o,a)}return s},A=(...e)=>{let t={},s={},r={},n;const o=[];for(const a of e)if(Array.isArray(a))Array.isArray(t)||(t=[]),t=[...t,...a];else if(m(a)){for(let[i,c]of Object.entries(a)){if(i==="signal"&&c instanceof globalThis.AbortSignal){o.push(c);continue}if(i==="context"){if(c!=null&&(!m(c)||Array.isArray(c)))throw new TypeError("The `context` option must be an object");t={...t,context:c==null?{}:{...t.context,...c}};continue}if(i==="searchParams"){c==null?n=void 0:n=n===void 0?c:at(n,c);continue}m(c)&&i in t&&(c=A(t[i],c)),t={...t,[i]:c}}m(a.hooks)&&(r=_(r,a.hooks),t.hooks=r),m(a.headers)&&(s=L(s,a.headers),t.headers=s)}return n!==void 0&&(t.searchParams=n),o.length>0&&(o.length===1?t.signal=o[0]:N?t.signal=AbortSignal.any(o):t.signal=o.at(-1)),t.context===void 0&&(t.context={}),t},ot=e=>q.includes(e)?e.toUpperCase():e,it=["get","put","head","delete","options","trace"],ct=[408,413,429,500,502,503,504],lt=[413,429,503],j={limit:2,methods:it,statusCodes:ct,afterStatusCodes:lt,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:e=>.3*2**(e-1)*1e3,jitter:void 0,retryOnTimeout:!1},ut=(e={})=>{if(typeof e=="number")return{...j,limit:e};if(e.methods&&!Array.isArray(e.methods))throw new Error("retry.methods must be an array");if(e.statusCodes&&!Array.isArray(e.statusCodes))throw new Error("retry.statusCodes must be an array");return{...j,...e}};class S extends Error{request;constructor(t){super(`Request timed out: ${t.method} ${t.url}`),this.name="TimeoutError",this.request=t}}async function ht(e,t,s,r){return new Promise((n,o)=>{const a=setTimeout(()=>{s&&s.abort(),o(new S(e))},r.timeout);r.fetch(e,t).then(n).catch(o).then(()=>{clearTimeout(a)})})}async function ft(e,{signal:t}){return new Promise((s,r)=>{t&&(t.throwIfAborted(),t.addEventListener("abort",n,{once:!0}));function n(){clearTimeout(o),r(t.reason)}const o=setTimeout(()=>{t?.removeEventListener("abort",n),s()},e)})}const pt=(e,t)=>{const s={};for(const r in t)Object.hasOwn(t,r)&&!(r in et)&&!(r in Z)&&(!(r in e)||r in tt)&&(s[r]=t[r]);return s},mt=e=>e===void 0?!1:Array.isArray(e)?e.length>0:e instanceof URLSearchParams?e.size>0:typeof e=="object"?Object.keys(e).length>0:typeof e=="string"?e.trim().length>0:!!e;function dt(e){return e instanceof T||e?.name===T.name}function yt(e){return e instanceof S||e?.name===S.name}class y{static create(t,s){const r=new y(t,s),n=async()=>{if(typeof r.#t.timeout=="number"&&r.#t.timeout>k)throw new RangeError(`The \`timeout\` option cannot be greater than ${k}`);await Promise.resolve();let a=await r.#d();for(const i of r.#t.hooks.afterResponse){const c=r.#u(a.clone()),u=await i(r.request,r.#i(),c,{retryCount:r.#s});if(u instanceof globalThis.Response&&(a=u),u instanceof C)throw await Promise.all([c.body?.cancel(),a.body?.cancel()]),new R(u.options)}if(r.#u(a),!a.ok&&(typeof r.#t.throwHttpErrors=="function"?r.#t.throwHttpErrors(a.status):r.#t.throwHttpErrors)){let i=new T(a,r.request,r.#i());for(const c of r.#t.hooks.beforeError)i=await c(i,{retryCount:r.#s});throw i}if(r.#t.onDownloadProgress){if(typeof r.#t.onDownloadProgress!="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!W)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return rt(a.clone(),r.#t.onDownloadProgress)}return a},o=r.#h(n).finally(async()=>{const a=r.#a,i=[];a&&!a.bodyUsed&&i.push(a.body?.cancel()),r.request.bodyUsed||i.push(r.request.body?.cancel()),await Promise.all(i)});for(const[a,i]of Object.entries(Y))a==="bytes"&&typeof globalThis.Response?.prototype?.bytes!="function"||(o[a]=async()=>{r.request.headers.set("accept",r.request.headers.get("accept")||i);const c=await o;if(a==="json"){if(c.status===204)return"";const u=await c.text();return u===""?"":s.parseJson?s.parseJson(u):JSON.parse(u)}return c[a]()});return o}static#p(t){return t&&typeof t=="object"&&!Array.isArray(t)&&!(t instanceof URLSearchParams)?Object.fromEntries(Object.entries(t).filter(([,s])=>s!==void 0)):t}request;#r;#s=0;#e;#t;#a;#n;#o;constructor(t,s={}){if(this.#e=t,this.#t={...s,headers:L(this.#e.headers,s.headers),hooks:_({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},s.hooks),method:ot(s.method??this.#e.method??"GET"),prefixUrl:String(s.prefixUrl||""),retry:ut(s.retry),throwHttpErrors:s.throwHttpErrors??!0,timeout:s.timeout??1e4,fetch:s.fetch??globalThis.fetch.bind(globalThis),context:s.context??{}},typeof this.#e!="string"&&!(this.#e instanceof URL||this.#e instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this.#t.prefixUrl&&typeof this.#e=="string"){if(this.#e.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this.#t.prefixUrl.endsWith("/")||(this.#t.prefixUrl+="/"),this.#e=this.#t.prefixUrl+this.#e}G&&N&&(this.#n=this.#t.signal??this.#e.signal,this.#r=new globalThis.AbortController,this.#t.signal=this.#n?AbortSignal.any([this.#n,this.#r.signal]):this.#r.signal),x&&(this.#t.duplex="half"),this.#t.json!==void 0&&(this.#t.body=this.#t.stringifyJson?.(this.#t.json)??JSON.stringify(this.#t.json),this.#t.headers.set("content-type",this.#t.headers.get("content-type")??"application/json"));const r=s.headers&&new globalThis.Headers(s.headers).has("content-type");if(this.#e instanceof globalThis.Request&&(V&&this.#t.body instanceof globalThis.FormData||this.#t.body instanceof URLSearchParams)&&!r&&this.#t.headers.delete("content-type"),this.request=new globalThis.Request(this.#e,this.#t),mt(this.#t.searchParams)){const o="?"+(typeof this.#t.searchParams=="string"?this.#t.searchParams.replace(/^\?/,""):new URLSearchParams(y.#p(this.#t.searchParams)).toString()),a=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,o);this.request=new globalThis.Request(a,this.#t)}if(this.#t.onUploadProgress){if(typeof this.#t.onUploadProgress!="function")throw new TypeError("The `onUploadProgress` option must be a function");if(!x)throw new Error("Request streams are not supported in your environment. The `duplex` option for `Request` is not available.");this.request=this.#f(this.request,this.#t.body??void 0)}}#c(){const t=this.#t.retry.delay(this.#s);let s=t;return this.#t.retry.jitter===!0?s=Math.random()*t:typeof this.#t.retry.jitter=="function"&&(s=this.#t.retry.jitter(t),(!Number.isFinite(s)||s<0)&&(s=t)),Math.min(this.#t.retry.backoffLimit,s)}async#m(t){if(this.#s++,this.#s>this.#t.retry.limit)throw t;const s=t instanceof Error?t:new U(t);if(s instanceof R)return s.customDelay??this.#c();if(!this.#t.retry.methods.includes(this.request.method.toLowerCase()))throw t;if(this.#t.retry.shouldRetry!==void 0){const r=await this.#t.retry.shouldRetry({error:s,retryCount:this.#s});if(r===!1)throw t;if(r===!0)return this.#c()}if(yt(t)&&!this.#t.retry.retryOnTimeout)throw t;if(dt(t)){if(!this.#t.retry.statusCodes.includes(t.response.status))throw t;const r=t.response.headers.get("Retry-After")??t.response.headers.get("RateLimit-Reset")??t.response.headers.get("X-RateLimit-Retry-After")??t.response.headers.get("X-RateLimit-Reset")??t.response.headers.get("X-Rate-Limit-Reset");if(r&&this.#t.retry.afterStatusCodes.includes(t.response.status)){let n=Number(r)*1e3;Number.isNaN(n)?n=Date.parse(r)-Date.now():n>=Date.parse("2024-01-01")&&(n-=Date.now());const o=this.#t.retry.maxRetryAfter??n;return n<o?n:o}if(t.response.status===413)throw t}return this.#c()}#u(t){return this.#t.parseJson&&(t.json=async()=>this.#t.parseJson(await t.text())),t}async#h(t){try{return await t()}catch(s){const r=Math.min(await this.#m(s),k);if(this.#s<1)throw s;if(await ft(r,this.#n?{signal:this.#n}:{}),s instanceof R&&s.customRequest){const n=this.#t.signal?new globalThis.Request(s.customRequest,{signal:this.#t.signal}):new globalThis.Request(s.customRequest);this.#l(n)}for(const n of this.#t.hooks.beforeRetry){const o=await n({request:this.request,options:this.#i(),error:s,retryCount:this.#s});if(o instanceof globalThis.Request){this.#l(o);break}if(o instanceof globalThis.Response)return o;if(o===O)return}return this.#h(t)}}async#d(){this.#r?.signal.aborted&&(this.#r=new globalThis.AbortController,this.#t.signal=this.#n?AbortSignal.any([this.#n,this.#r.signal]):this.#r.signal,this.request=new globalThis.Request(this.request,{signal:this.#t.signal}));for(const s of this.#t.hooks.beforeRequest){const r=await s(this.request,this.#i(),{retryCount:this.#s});if(r instanceof Response)return r;if(r instanceof globalThis.Request){this.#l(r);break}}const t=pt(this.request,this.#t);return this.#a=this.request,this.request=this.#a.clone(),this.#t.timeout===!1?this.#t.fetch(this.#a,t):ht(this.#a,t,this.#r,this.#t)}#i(){if(!this.#o){const{hooks:t,...s}=this.#t;this.#o=Object.freeze(s)}return this.#o}#l(t){this.#o=void 0,this.request=this.#f(t)}#f(t,s){return!this.#t.onUploadProgress||!t.body?t:nt(t,this.#t.onUploadProgress,s??this.#t.body??void 0)}}/*! MIT License Â© Sindre Sorhus */const I=e=>{const t=(s,r)=>y.create(s,b(e,r));for(const s of q)t[s]=(r,n)=>y.create(r,b(e,n,{method:s}));return t.create=s=>I(b(s)),t.extend=s=>(typeof s=="function"&&(s=s(e??{})),I(b(e,s))),t.stop=O,t.retry=Q,t},h=I(),D="MWRiNTQ1NDctM2EyYi00NzcxLTlhNWYtMDdlNGViM2NkYWJj",gt="https://cloudflare-worker-token-service.audio-pwa.workers.dev/token",bt="https://api.napster.com/oauth/access_token";let p;const z=e=>{application.postUiMessage(e)},f=()=>localStorage.getItem("apiKey")||D,d=h.create({hooks:{beforeRequest:[e=>{const t=localStorage.getItem("auth");t&&(p=JSON.parse(t),e.headers.set("Authorization",`Bearer ${p?.access_token}`))}],afterResponse:[async(e,t,s)=>{if(s.status===401){const r=await wt();return e.headers.set("Authorization",`Bearer ${r}`),d(e,t)}}]}}),wt=async()=>{if(!p)return;const e=localStorage.getItem("clientId"),t=localStorage.getItem("clientSecret");let s=gt;const r=new URLSearchParams;r.append("client_id",e||D),r.append("grant_type","refresh_token"),r.append("refresh_token",p.refresh_token),r.append("response_type","code"),e&&t&&(r.append("client_secret",t),s=bt);const n=await h.post(s,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r}).json();if(n.access_token&&n.refresh_token)return localStorage.setItem("auth",JSON.stringify(n)),n.access_token},l="https://api.napster.com/v2.2";function P(e){return e.map(t=>({apiId:t.id.toString(),artistApiId:t.contributingArtists.primaryArtist,artistName:t.artistName,name:t.name,images:$(t.id)}))}function Rt(e){return e.map(t=>({apiId:t.id.toString(),name:t.name,images:E(t.id)}))}function $(e){return[70,170,200,300,500].map(s=>({height:s,url:`https://api.napster.com/imageserver/v2/albums/${e}/images/${s}x${s}.jpg`,width:s}))}function E(e){return[{width:70,height:47},{width:150,height:100},{width:356,height:237},{width:633,height:422}].map(s=>({height:s.height,width:s.width,url:`https://api.napster.com/imageserver/v2/artists/${e}/images/${s.width}x${s.height}.jpg`}))}function g(e){return e.map(t=>({albumApiId:t.albumId,apiId:t.id,artistApiId:t.artistId,artistName:t.artistName,duration:t.playbackSeconds,images:$(t.albumId),name:t.name}))}const M=async()=>{p&&(application.onGetUserPlaylists=At,application.onGetTopItems=Et)},kt=async()=>{const t=document.location.host.split(".");t.shift();const s=t.join("."),r=`${document.location.protocol}//${s}`,n=await application.getPluginId(),o=localStorage.getItem("apiKey")??"",a=localStorage.getItem("apiSecret")??"";z({type:"info",origin:r,pluginId:n,apiKey:o,apiSecret:a})};application.onUiMessage=async e=>{switch(e.type){case"login":p=e.auth,localStorage.setItem("auth",JSON.stringify(p)),M();break;case"logout":localStorage.removeItem("auth");break;case"check-login":const t=localStorage.getItem("auth");t&&z({type:"login",auth:JSON.parse(t)}),await kt();break;case"set-keys":localStorage.setItem("apiKey",e.apiKey),localStorage.setItem("apiSecret",e.apiSecret);break}};application.onDeepLinkMessage=async e=>{application.postUiMessage({type:"deeplink",url:e})};async function Tt(e){const s=`${l}/artists/${e.apiId}?apikey=${f()}`,r=e.sortBy||"top";let n;switch(r){case"release_date":n="/albums";break;case"new":n="/albums/new";break;case"top":default:n="/albums/top";break}const o=`${l}/artists/${e.apiId}${n}?apikey=${f()}&limit=200`;try{const a=await h.get(s).json(),c=(await h.get(o).json()).albums,u=a.artists[0],K=[{displayName:"Top Albums",value:"top"},{displayName:"Release Date",value:"release_date"},{displayName:"New Releases",value:"new"}];return{items:P(c),artist:{name:u.name,apiId:e.apiId||"",images:E(e.apiId||"")},sortOptions:K,sortBy:r}}catch{return{items:[]}}}async function St(e){const s=e.pageInfo?.offset||0,r=`${l}/artists/${e.apiId}?apikey=${f()}`,n=`${l}/artists/${e.apiId}/tracks/top?apikey=${f()}&limit=10&offset=${s}`;try{const o=await h.get(r).json(),a=await h.get(n).json(),i=a.tracks,c=o.artists[0],u={offset:s,totalResults:a.meta.totalCount,resultsPerPage:10};return{items:g(i),pageInfo:u,artist:{name:c.name,apiId:e.apiId||"",images:E(e.apiId||"")}}}catch{return{items:[]}}}async function It(e){const t=`${l}/albums/${e.apiId}?apikey=${f()}`,s=`${l}/albums/${e.apiId}/tracks?apikey=${f()}`;try{const r=await h.get(t).json(),o=(await h.get(s).json()).tracks,a=r.albums[0];return{items:g(o),album:{artistName:a.artistName,artistApiId:a.contributingArtists.primaryArtist,apiId:e.apiId||"",name:a.name,images:$(e.apiId||"")}}}catch{return{items:[]}}}async function At(e){if(!p)return{items:[]};const t=`${l}/me/library/playlists`;return{items:(await d.get(t).json()).playlists.map(n=>({name:n.name,images:n.images,apiId:n.id}))}}async function Pt(e){const s=`${l}/playlists/${e.apiId}?apikey=${f()}`,r=`${l}/playlists/${e.apiId}/tracks?apikey=${f()}&limit=200`,n=await d.get(s).json(),o=await d.get(r).json();return{playlist:{name:n.playlists[0].name,images:n.playlists[0].images},items:g(o.tracks)}}async function H(e){const s=e.pageInfo?.offset||0,r=`${l}/search?apikey=${f()}&query=${encodeURIComponent(e.query)}&type=artist&per_type_limit=20&offset=${s}`;try{const n=await h.get(r).json(),o=n.search.data.artists,a={offset:s,totalResults:n.meta.totalCount,resultsPerPage:20};return{items:Rt(o),pageInfo:a}}catch{return{items:[]}}}async function J(e){const s=e.pageInfo?.offset||0,r=`${l}/search?apikey=${f()}&query=${encodeURIComponent(e.query)}&type=album&per_type_limit=20&offset=${s}`;try{const n=await h.get(r).json(),o=n.search.data.albums,a={offset:s,totalResults:n.meta.totalCount,resultsPerPage:20};return{items:P(o),pageInfo:a}}catch{return{items:[]}}}async function B(e){const s=e.pageInfo?.offset||0,r=`${l}/search?apikey=${f()}&query=${encodeURIComponent(e.query)}&type=track&per_type_limit=20&offset=${s}`;try{const n=await h.get(r).json(),o=n.search.data.tracks,a={offset:s,totalResults:n.meta.totalCount,resultsPerPage:20};return{items:g(o),pageInfo:a}}catch{return{items:[]}}}async function $t(e){const[t,s,r]=await Promise.all([B(e),J(e),H(e)]);return{tracks:t,albums:s,artists:r}}async function Et(){const e=`${l}/me/personalized/tracks/new?limit=20`,t=`${l}/me/personalized/albums/new?limit=20`,[s,r]=await Promise.all([d.get(e).json(),d.get(t).json()]);return{tracks:{items:g(s.tracks)},albums:{items:P(r.albums)}}}const F=e=>{localStorage.setItem("kb-color-mode",e)};async function xt(e){if(!p||!e.apiId)throw new Error("No authentication or track ID available");const t=`${l}/streams`;try{const s=await d.get(t,{searchParams:{track:e.apiId,bitrate:320,format:"AAC",protocol:""}}).json();if(s.streams&&s.streams.length>0)return s.streams[0].url;throw new Error("No stream URL available")}catch(s){throw new Error(`Failed to get stream URL: ${s}`)}}const jt=async()=>{application.onSearchAll=$t,application.onSearchAlbums=J,application.onSearchTracks=B,application.onSearchArtists=H,application.onGetAlbumTracks=It,application.onGetArtistAlbums=Tt,application.onGetArtistTopTracks=St,application.onGetPlaylistTracks=Pt,application.onGetTrackUrl=xt;const e=localStorage.getItem("auth");e&&(p=JSON.parse(e),M());const t=await application.getTheme();F(t)};application.onChangeTheme=async e=>{F(e)};jt();
